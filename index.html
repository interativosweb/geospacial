<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GeoSpacial ‚Äî 2D/3D</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Aviso se o app n√£o carregar -->
  <script>
    window.__APP_OK = false;
    window.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        if (!window.__APP_OK) {
          const el = document.createElement('div');
          el.style.cssText = `
            position:fixed; left:12px; right:12px; bottom:12px; z-index:9999;
            padding:12px 14px; border:1px solid rgba(0,0,0,0.12);
            background:rgba(255,255,255,0.88); backdrop-filter: blur(10px);
            border-radius:14px; box-shadow:0 18px 60px rgba(0,0,0,0.12);
            font:600 13px ui-sans-serif, system-ui, -apple-system;
            line-height:1.35;
          `;
          el.innerHTML = `
            <div style="font-weight:800; margin-bottom:6px;">N√£o consegui carregar o app.</div>
            Abra via servidor (n√£o pode ser file:///):<br/>
            <b>python -m http.server 8000</b><br/>
            e acesse: <b>http://localhost:8000</b><br/><br/>
            Depois veja o Console (F12) para erros.
          `;
          document.body.appendChild(el);
        }
      }, 900);
    });
  </script>

  <!-- Topbar -->
  <header class="topbar">
    <div class="topbar-left">
      <div class="logo-dot"></div>
      <div class="title">
        <div class="title-main">GeoSpacial</div>
        <div class="title-sub">Geometria espacial ‚Ä¢ clean</div>
      </div>
    </div>

    <div class="topbar-center">
      <button class="pill active" id="btnMode3D">3D</button>
      <button class="pill" id="btnMode2D">2D</button>
    </div>

    <div class="topbar-right">
      <span class="status" id="status">3D ‚Ä¢ Selecionar</span>
      <button class="iconbtn" id="btnResetView" title="Reset c√¢mera (3D)">‚ü≤</button>
    </div>
  </header>

  <!-- Toolbox flutuante -->
  <aside class="toolbox" id="toolbox">
    <div class="toolbox-head">
      <button class="iconbtn" id="btnToggleTools" title="Recolher/Expandir">‚â°</button>
      <div class="toolbox-title">Ferramentas</div>
    </div>

    <section class="toolgroup">
      <button class="groupbtn" data-group="move">Movement</button>
      <div class="groupbody" id="group-move">
        <button class="toolbtn active" data-tool="select3d" data-mode="3d" title="Selecionar">
          ‚ü° <span>Move</span>
        </button>
        <button class="toolbtn" data-tool="orbit3d" data-mode="3d" title="Rotacionar vista">
          ‚ü≥ <span>Rotate View</span>
        </button>
        <button class="toolbtn" data-tool="pan3d" data-mode="3d" title="Mover vista">
          ‚Üî <span>Move View</span>
        </button>
        <button class="toolbtn" data-tool="zoom3d" data-mode="3d" title="Zoom">
          üîç <span>Zoom</span>
        </button>
      </div>
    </section>

    <section class="toolgroup">
      <button class="groupbtn" data-group="planes">Planes</button>
      <div class="groupbody" id="group-planes">
        <button class="toolbtn" data-tool="addPlane" data-mode="3d" title="Adicionar plano">
          ‚ñ≠ <span>Plane</span>
        </button>
      </div>
    </section>

    <section class="toolgroup">
      <button class="groupbtn" data-group="solids">Solids</button>
      <div class="groupbody" id="group-solids">
        <button class="toolbtn" data-tool="addCube" data-mode="3d" title="Adicionar cubo">
          ‚óº <span>Cube</span>
        </button>
        <button class="toolbtn" data-tool="addSphere" data-mode="3d" title="Adicionar esfera">
          ‚óè <span>Sphere</span>
        </button>
        <button class="toolbtn" data-tool="addCylinder" data-mode="3d" title="Adicionar cilindro">
          ‚äò <span>Cylinder</span>
        </button>
        <button class="toolbtn" data-tool="addCone" data-mode="3d" title="Adicionar cone">
          ‚ñ≤ <span>Cone</span>
        </button>
      </div>
    </section>

    <section class="toolgroup">
      <button class="groupbtn" data-group="transform">Transform</button>
      <div class="groupbody" id="group-transform">
        <button class="toolbtn active" data-tool="tMove" data-mode="3d" title="Mover objeto">
          ‚Üï <span>Move</span>
        </button>
        <button class="toolbtn" data-tool="tRotate" data-mode="3d" title="Rotacionar objeto">
          ‚ü≤ <span>Rotate</span>
        </button>
        <button class="toolbtn" data-tool="tScale" data-mode="3d" title="Escalar objeto">
          ‚§¢ <span>Scale</span>
        </button>
        <div class="divider"></div>
        <button class="toolbtn" data-tool="deleteSelected" data-mode="3d" title="Excluir selecionado">
          ‚å´ <span>Delete</span>
        </button>
        <button class="toolbtn" data-tool="clearAll3D" data-mode="3d" title="Limpar tudo">
          ‚úï <span>Clear</span>
        </button>
      </div>
    </section>

    <section class="toolgroup">
      <button class="groupbtn" data-group="twod">2D Tools</button>
      <div class="groupbody" id="group-twod">
        <button class="toolbtn" data-tool="rect2d" data-mode="2d" title="Ret√¢ngulo/Quadrado">
          ‚ñ¢ <span>Rect</span>
        </button>
        <button class="toolbtn" data-tool="tri2d" data-mode="2d" title="Tri√¢ngulo">
          ‚ñ≥ <span>Triangle</span>
        </button>
        <button class="toolbtn" data-tool="circle2d" data-mode="2d" title="C√≠rculo">
          ‚óØ <span>Circle</span>
        </button>
        <button class="toolbtn" data-tool="clear2d" data-mode="2d" title="Limpar 2D">
          ‚úï <span>Clear</span>
        </button>
      </div>
    </section>
  </aside>

  <!-- √Årea principal (full screen) -->
  <main class="workspace">
    <div class="layer hidden" id="layer2d">
      <svg id="svg2d" class="svg2d" viewBox="0 0 1000 700" preserveAspectRatio="xMidYMid meet">
        <defs>
          <filter id="softShadow">
            <feDropShadow dx="0" dy="10" stdDeviation="12" flood-opacity="0.16"/>
          </filter>
        </defs>
      </svg>
    </div>

    <div class="layer" id="layer3d">
      <canvas id="canvas3d"></canvas>
    </div>
  </main>

  <script type="module" src="app.js"></script>
</body>
</html>
